<tool id="tmap_postprocess" name="TMAP8 Postprocessing" version="0.1.0">

  <description>Postprocess TMAP8 simulation data for visualization in Omniverse.</description>

  <requirements>
    <container type="docker">ghcr.io/pyvista/pyvista:latest</container>
  </requirements>

  <command>
    <![CDATA[
      python3 $__tool_directory__/tmap_postprocess.py --simulation_time $simulation_time --interval_time $interval_time --simulation_outputs '$__new_file_path__' &&
      mv output.csv '$output'
    ]]>
  </command>

  <configfiles>
    <configfile name="__new_file_path__">
  #for $d in $all_outputs
  ${d.file_name} ${d.name} ${d.ext}
  #end for
    </configfile>
  </configfiles>

  <inputs>
    <param type="float" name="simulation_time" label="Simulation Time" help="Simulation Time (s)" value="10.0"/>
    <param type="float" name="interval_time" label="Interval Time" help="Interval Time (s)" value="1"/>
    <param name="all_outputs" type="data_collection" collection_type="list" label="All Output Files" />
  </inputs>

  <outputs>
    <data format="csv" name="output" label="Output File"
      help="Processed output file from TMAP8 simulation. Format: csv" />
  </outputs>

  <help>
    This tool processes TMAP8 simulation outputs, extracting relevant data based on the specified simulation and interval times. The output is formatted for visualization in Omniverse.
    Ensure that the input collection contains the output files generated by TMAP8.
  </help>

  <citations>

  </citations>
</tool>